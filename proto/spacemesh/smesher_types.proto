syntax = "proto3";
package spacemesh;

// User provided post data
message PostUserData {
    string path = 1;                // os path to post file(s)
    uint64 commitment_size = 2;     // user specified post commitment size in bytes
    uint32 processor_id = 3;        // processor to be used for smeshing. e.g. cpu, gpu0, gpu1, etc...
}

message PostProcessor {
    uint32 id = 1;                  // numberical identifier - unique per system
    string info = 2;                // e.g. Nvidia `Geforce RTX (Cuda)` or `AMD Radeon (Vulkan)`
}

message PostProcessors {
    repeated PostProcessor processor = 1;
}

message DeleteCommitment {
    bool delete_commitment = 1;
}

message SmeshingState {
    enum SmeshingStatsus {
        NOT_SMESHING = 0;       // node is not smeshing
        SMESHING = 1;           // node is smeshing
    }
}

// Proof of space commitment data
message PostCommitmentData {
    enum PostData {
        NOT_SETUP = 0;     // Post commitment file was not initialized (in this or in previous node sessions)
        IN_PROGRESS = 1;   // Init is in progress in this smesher session
        DONE = 2;          // Init is done (in this or previous node sessions) and commitment file is available and verified
        ERROR = 3;         // Commitment file creation or verification failed. See PostInitErrors and error fields.
    }
    string path = 1;            // Init file path on a system volume
    uint64 bytes_written = 2;   // bytes written if init is in progress
    uint64 commitment_size = 3; // Commitment size in bytes
    string errer = 4;           // last post related error message
    enum Errors {
        FILE_NOT_FOUND = 0;     // post init file not found in expected path
        READ_ERROR = 1;         // failure to read post init file
        WRITE_ERROR = 2;        // failure to write to post init file
    }
}
