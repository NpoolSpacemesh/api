syntax = "proto3";
package spacemesh;

// User provided post data
message CommitmentUserData {
    string path = 1;                // OS path to post file(s)
    uint64 commitment_size = 2;     // User specified post commitment size in bytes
    uint32 processor_id = 3;        // Processor to be used for smeshing. e.g. cpu, gpu0, gpu1, etc...
    bool   append = 4;              // Append to existing file if it exists. Otherwise - overwrite.
}

message CommitmentProcessor {
    uint32 id = 1;                  // Numberical identifier - unique per system
    string info = 2;                // Proc info, e.g. Nvidia `Geforce RTX (Cuda)` or `AMD Radeon (Vulkan)`
}

message CommitmentProcessors {
    repeated CommitmentProcessor processor = 1;
}

message DeleteCommitment {
    bool delete_commitment = 1;
}

// Proof of space commitment data
message CommitmentData {
    enum PostData {
        NOT_SETUP = 0;     // Post commitment file was not initialized (in this or in previous node sessions)
        IN_PROGRESS = 1;   // Init phase is currently in progress in this smesher session
        DONE = 2;          // Init pashe is done (in this or previous node sessions) and commitment file is available and verified
        PARTIAL = 3;       // Init commitment file is partially written and init can be continued.
        ERROR = 4;         // Commitment file creation or verification failed. See PostInitErrors and error fields.

    }
    string path = 1;            // Init file path on a system volume
    uint64 bytes_written = 2;   // Bytes written if init is in progress
    uint64 commitment_size = 3; // Commitment size in bytes
    string error_message = 4;   // Last init phase error message
    enum Errors {
        FILE_NOT_FOUND = 0;     // Post commitment file not found in expected path
        READ_ERROR = 1;         // Failure to read commitment file
        WRITE_ERROR = 2;        // Failure to write to commitment file
    }
}
